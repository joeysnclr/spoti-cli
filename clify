#!/usr/bin/env python3
import os
import sys
import curses
import utils
from Menu import Menu
from MenuBar import MenuBar
from PlaylistMenu import PlaylistMenu
from LyricsMenu import LyricsMenu


class MainMenu(object):

    def __init__(self, stdscreen):
        self.stdscreen = stdscreen
        self.menuBar = MenuBar(self.stdscreen)
        PlaylistMenu(self.stdscreen, self.menuBar).activate()

if __name__ == "__main__":
    # clears cache
    utils.clearCache()
    # gets config (creates if not created yet)
    # utils.writeConfig({})
    config = utils.readConfig()
    # spotify user log in if first time
    if not config.get("hasVerified", False):
        utils.verify()
    else:
        utils.getTokens()
    # displays playlist menu
    curses.wrapper(MainMenu)
    # kills threads and main program
    quit()
